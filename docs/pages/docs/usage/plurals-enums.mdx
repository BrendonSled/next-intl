import Callout from 'components/Callout';

# Plurals and enums formatting

The formatting of plurals and pronouns can vary depending on the user's locale and may include different rules whether the language is gendered or not, or even different rules for cardinal and ordinal plural formats.

By using the formatting capabilities provided by `next-intl`, you can adjust to these variations and ensure that plurals and the different enum values are displayed accurately across your `Next.js` app for all users.

## Selecting enum-based values

The `{key, select, matches}` is used to choose output by matching a value to one of many choices. (It is similar to the `switch` statement available in some programming languages.) The key is looked up in the input data.
The corresponding value is matched to one of matches and the corresponding output is returned.
The `key` argument must follow [Unicode Pattern_Syntax](https://www.unicode.org/reports/tr31/tr31-9.html#Pattern_Syntax). The matches is a space-separated list of matches.

The format of a match is `{matchKey output}`. (A match is similar to the `case` statement of the `switch` found in some programming languages.) The match is a literal value.
If it is the same as the value for `matchKey` then the corresponding `output` will be used.

`output` is itself a message, so it can be a literal string or also have more arguments nested inside of it.

The `other` match is special and is used if nothing else matches. (This is similar to the `default` case of the `switch` found in some programming languages.)

<Callout type="danger">
  **Danger**: `other` is required as per `icu4j` implementation. We will throw
  an error if `select` is used without `other`.
</Callout>

```json filename="en.json"
"message": "{gender, select, female {She} male {He} other {They}} is online."
```

```js
t('message', {gender: 'female'}); // "She is online."
```

## Cardinal pluralization

The `{key, plural, matches}` is used to choose output based on the pluralization rules of the current locale.
It is very similar to the `{select}` format above except that the value is expected to be a number and is mapped to a cardinal plural category.

The match is a literal value and is matched to one of these plural categories. Not all languages use all plural categories.

| Category | Meaning                                                                                                                                                                                                                                     |
| :------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|  `zero`  | This category is used for languages that have grammar specialized specifically for zero number of items. (Examples are Arabic and Latvian.)                                                                                                 |
|  `one`   | This category is used for languages that have grammar specialized specifically for one item. Many languages, but not all, use this plural category. (Many popular Asian languages, such as Chinese and Japanese, do not use this category.) |
|  `two`   | This category is used for languages that have grammar specialized specifically for two items. (Examples are Arabic and Welsh.)                                                                                                              |
|  `few`   | This category is used for languages that have grammar specialized specifically for a small number of items. For some languages this is used for 2-4 items, for some 3-10 items, and other languages have even more complex rules.           |
|  `many`  | This category is used for languages that have grammar specialized specifically for a larger number of items. (Examples are Arabic, Polish, and Russian.)                                                                                    |
| `other`  | This category is used if the value doesn't match one of the other plural categories. Note that this is used for "plural" for languages (such as English) that have a simple "singular" versus "plural" dichotomy.                           |
| `=value` | This is used to match a specific value (of type `number`) regardless of the plural categories of the current locale.                                                                                                                        |

<Callout type="danger">
  **Danger**: `other` is required as per `icu4j` implementation. We will throw
  an error if `plural` is used without `other`.
</Callout>

```json filename="en.json"
"message": "You have {count, plural, =0 {no followers yet} =1 {one follower} other {# followers}}."
```

{/* prettier-ignore */}
```js
t('message', {count: 0});    // "You have no followers yet."
t('message', {count: 1});    // "You have one follower."
t('message', {count: 3580}); // "You have 3,580 followers."
```

```json filename="ar.json"
"message": "لديك {count, plural, =one {متابع واحد} =few {# متابعين} other {# متابع}}."
```

{/* prettier-ignore */}
```js
t('message', {count: 3});    // "لديك ٣ متابعين."
t('message', {count: 1});    // "لديك متابع واحد."
t('message', {count: 3580}); // "لديك ٣٬٥٨٠ متابع."
```

In the `output` of the match, the `#` special token can be used as a placeholder for the numeric value and will be formatted as if it were `{key, number}`.

<Callout type="warning">
  **Important**: If you don't want to format the numbers while using the `plural`
  format, you can interpolate the `key` manually instead of depending on the `#`.  
  So, instead of `other # units` use `other {key} units` instead which will eliminate the format from the intorplated value.

if we apply that to the example above it would look like this:

```json filename="en.json"
"message": "You have {count, plural, =0 {no followers yet} =1 {one follower} other {{count} followers}}."
```

```json filename="ar.json"
"message": "لديك {count, plural, =one {متابع واحد} =few {{count} متابعين} other {{count} متابع}}."
```

</Callout>

## Ordinal pluralization

The `{key, selectordinal, matches}` is used to choose output based on the ordinal pluralization rules (1st, 2nd, 3rd, etc.) of the current locale.
It is very similar to the `{plural}` format above except that the value is mapped to an ordinal plural category instead of cardinal.

The match is a literal value and is matched to one of these plural categories. Not all languages use all plural categories.

| Category | Meaning                                                                                                                                                                                                                                     |
| :------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|  `zero`  | This category is used for languages that have grammar specialized specifically for zero number of items. (Examples are Arabic and Latvian.)                                                                                                 |
|  `one`   | This category is used for languages that have grammar specialized specifically for one item. Many languages, but not all, use this plural category. (Many popular Asian languages, such as Chinese and Japanese, do not use this category.) |
|  `two`   | This category is used for languages that have grammar specialized specifically for two items. (Examples are Arabic and Welsh.)                                                                                                              |
|  `few`   | This category is used for languages that have grammar specialized specifically for a small number of items. For some languages this is used for 2-4 items, for some 3-10 items, and other languages have even more complex rules.           |
|  `many`  | This category is used for languages that have grammar specialized specifically for a larger number of items. (Examples are Arabic, Polish, and Russian.)                                                                                    |
| `other`  | This category is used if the value doesn't match one of the other plural categories. Note that this is used for "plural" for languages (such as English) that have a simple "singular" versus "plural" dichotomy.                           |
| `=value` | This is used to match a specific value (of type `number`) regardless of the plural categories of the current locale.                                                                                                                        |

<Callout type="danger">
  **Danger**: `other` is required as per `icu4j` implementation. We will throw
  an error if `selectordinal` is used without `other`.
</Callout>

```json filename="en.json"
"message": "It's your {year, selectordinal, one {#st} two {#nd} few {#rd} other {#th}} birthday!"
```

```js
t('message', {year: 21}); // "It's your 21st birthday!"
```

In the `output` of the match, the `#` special token can be used as a placeholder for the numeric value and will be formatted as if it were `{key, number}`.

<Callout type="warning">
  **Important**: If you don't want to format the numbers while using the `selectordinal`
  format, you can interpolate the `key` manually instead of depending on the `#`.  
  So, instead of `one #st` use `one {key}st` instead which will eliminate the format from the intorplated value.

if we apply that to the example above it would look like this:

```json filename="en.json"
"message": "It's your {year, selectordinal, one {{year}st} two {{year}nd} few {{year}rd} other {{year}th}} birthday!"
```

</Callout>
